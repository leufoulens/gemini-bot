# üê≥ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é —Å Docker

–≠—Ç–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–º–æ–∂–µ—Ç –≤–∞–º —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å Gemini Telegram Bot —Å –ø–æ–º–æ—â—å—é Docker –∏ Docker Compose.

## üìã –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

–ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ:

1. **Docker** (–≤–µ—Ä—Å–∏—è 20.10 –∏–ª–∏ –≤—ã—à–µ)
   - [–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ Docker](https://docs.docker.com/get-docker/)
   
2. **Docker Compose** (–≤–µ—Ä—Å–∏—è 2.0 –∏–ª–∏ –≤—ã—à–µ)
   - [–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ Docker Compose](https://docs.docker.com/compose/install/)

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫—É –º–æ–∂–Ω–æ –∫–æ–º–∞–Ω–¥–∞–º–∏:
```bash
docker --version
docker-compose --version
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞:

```bash
# Linux/macOS
cat > .env << EOF
TELEGRAM_BOT_TOKEN=your_telegram_bot_token_here
GEMINI_API_KEY=your_gemini_api_key_here
EOF
```

–ò–ª–∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏–∑ –ø—Ä–∏–º–µ—Ä–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å):
```bash
cp .env.example .env
```

–ó–∞—Ç–µ–º –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env` —Ñ–∞–π–ª –∏ —É–∫–∞–∂–∏—Ç–µ —Å–≤–æ–∏ —Ç–æ–∫–µ–Ω—ã:

```env
# Telegram Bot Token (–ø–æ–ª—É—á–∏—Ç—å —É @BotFather)
TELEGRAM_BOT_TOKEN=1234567890:ABCdefGHIjklMNOpqrsTUVwxyz

# Gemini API Key (–ø–æ–ª—É—á–∏—Ç—å –Ω–∞ https://ai.google.dev/)
GEMINI_API_KEY=AIzaSyABC123DEF456GHI789JKL012MNO345PQR
```

### 2. –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

#### –í–∞—Ä–∏–∞–Ω—Ç 1: –° –ø–æ–º–æ—â—å—é —Å–∫—Ä–∏–ø—Ç–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
./deploy.sh start
```

#### –í–∞—Ä–∏–∞–Ω—Ç 2: –ù–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ docker-compose

```bash
docker-compose up -d --build
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞

```bash
./deploy.sh status
```

–ò–ª–∏:

```bash
docker-compose ps
```

## üìñ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–æ—Ç–æ–º

### –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –º–µ–Ω—é

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –±–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ –º–µ–Ω—é:

```bash
./deploy.sh
```

–í—ã —É–≤–∏–¥–∏—Ç–µ –º–µ–Ω—é —Å –æ–ø—Ü–∏—è–º–∏:
- –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞
- –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–æ—Ç–∞
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞
- –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
- –û–±–Ω–æ–≤–∏—Ç—å –±–æ—Ç–∞
- –û—á–∏—Å—Ç–∫–∞

### –ö–æ–º–∞–Ω–¥—ã

#### –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

```bash
./deploy.sh start
```

–ò–ª–∏:
```bash
docker-compose up -d --build
```

#### –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–æ—Ç–∞

```bash
./deploy.sh stop
```

–ò–ª–∏:
```bash
docker-compose down
```

#### –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –±–æ—Ç–∞

```bash
./deploy.sh restart
```

–ò–ª–∏:
```bash
docker-compose restart
```

#### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

```bash
./deploy.sh logs
```

–ò–ª–∏:
```bash
docker-compose logs -f
```

–î–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö N —Å—Ç—Ä–æ–∫:
```bash
docker-compose logs --tail=100 -f
```

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞

```bash
./deploy.sh status
```

–ò–ª–∏:
```bash
docker-compose ps
```

#### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞

```bash
./deploy.sh update
```

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞:
1. –ü–æ–ª—É—á–∞–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–∑ git (–µ—Å–ª–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π)
2. –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ç–µ–∫—É—â–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
3. –ü–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ—Ç Docker –æ–±—Ä–∞–∑ –±–µ–∑ –∫—ç—à–∞
4. –ó–∞–ø—É—Å–∫–∞–µ—Ç –Ω–æ–≤—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä

–ò–ª–∏ –≤—Ä—É—á–Ω—É—é:
```bash
git pull
docker-compose down
docker-compose build --no-cache
docker-compose up -d
```

#### –û—á–∏—Å—Ç–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤

```bash
./deploy.sh cleanup
```

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ —É–¥–∞–ª—è–µ—Ç:
- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
- Volumes
- –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ Docker —Ä–µ—Å—É—Ä—Å—ã

## üîç –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

```bash
docker-compose logs -f gemini-bot
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤

```bash
docker stats gemini-bot
```

### –í—Ö–æ–¥ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

```bash
docker-compose exec gemini-bot sh
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ

```bash
docker-compose exec gemini-bot env
```

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ `docker-compose.yml` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:

```yaml
deploy:
  resources:
    limits:
      cpus: '1'
      memory: 512M
    reservations:
      cpus: '0.5'
      memory: 256M
```

–í—ã –º–æ–∂–µ—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å —ç—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏—è –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –≤–∞—à–∏–º–∏ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—è–º–∏:

```bash
nano docker-compose.yml
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫:

```yaml
restart: unless-stopped
```

–î–æ—Å—Ç—É–ø–Ω—ã–µ –æ–ø—Ü–∏–∏:
- `no` - –Ω–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- `always` - –≤—Å–µ–≥–¥–∞ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å
- `on-failure` - –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –æ—à–∏–±–∫–µ
- `unless-stopped` - –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å, –µ—Å–ª–∏ –Ω–µ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤—Ä—É—á–Ω—É—é

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

–õ–æ–≥–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã –ø–æ —Ä–∞–∑–º–µ—Ä—É:

```yaml
logging:
  driver: "json-file"
  options:
    max-size: "10m"
    max-file: "3"
```

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç:
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ –ª–æ–≥–∞: 10 –ú–ë
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–æ—Ç–∏—Ä—É–µ–º—ã—Ö —Ñ–∞–π–ª–æ–≤: 3
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –æ–±—â–∏–π —Ä–∞–∑–º–µ—Ä –ª–æ–≥–æ–≤: 30 –ú–ë

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —á–∞—Å–æ–≤–æ–≥–æ –ø–æ—è—Å–∞

–í `docker-compose.yml` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω —á–∞—Å–æ–≤–æ–π –ø–æ—è—Å:

```yaml
environment:
  - TZ=Europe/Moscow
```

–ò–∑–º–µ–Ω–∏—Ç–µ –Ω–∞ —Å–≤–æ–π —á–∞—Å–æ–≤–æ–π –ø–æ—è—Å, –µ—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ:
```yaml
environment:
  - TZ=America/New_York  # –ù–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –ù—å—é-–ô–æ—Ä–∫–∞
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ó–∞—â–∏—Ç–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

1. **–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ —Ñ–∞–π–ª `.env` –≤ git**
   
   –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `.env` –µ—Å—Ç—å –≤ `.gitignore`:
   ```bash
   echo ".env" >> .gitignore
   ```

2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–∞–¥–µ–∂–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã**
   
   –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–¥–Ω–∏ –∏ —Ç–µ –∂–µ —Ç–æ–∫–µ–Ω—ã –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞.

3. **–û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ .env**
   
   ```bash
   chmod 600 .env
   ```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

–†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ Docker –æ–±—Ä–∞–∑:

```bash
docker-compose pull
docker-compose up -d
```

–ò–ª–∏ —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç:

```bash
./deploy.sh update
```

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:
   ```bash
   docker-compose logs gemini-bot
   ```

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `.env` —Ñ–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:
   ```bash
   cat .env
   ```

3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ—Ä—Ç—ã –Ω–µ –∑–∞–Ω—è—Ç—ã:
   ```bash
   docker-compose ps
   ```

### –û—à–∏–±–∫–∞ "API key not valid"

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å `GEMINI_API_KEY` –≤ —Ñ–∞–π–ª–µ `.env`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–µ—Ç –ø—Ä–æ–±–µ–ª–æ–≤ –∏ –∫–∞–≤—ã—á–µ–∫ –≤–æ–∫—Ä—É–≥ –∑–Ω–∞—á–µ–Ω–∏—è
3. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π API –∫–ª—é—á –Ω–∞ [ai.google.dev](https://ai.google.dev/)

### –û—à–∏–±–∫–∞ "Conflict: terminated by other getUpdates request"

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –±–æ—Ç —É–∂–µ –∑–∞–ø—É—â–µ–Ω –≤ –¥—Ä—É–≥–æ–º –º–µ—Å—Ç–µ.

–†–µ—à–µ–Ω–∏–µ:
1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤—Å–µ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã –±–æ—Ç–∞
2. –ü–æ–¥–æ–∂–¥–∏—Ç–µ 1-2 –º–∏–Ω—É—Ç—ã
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–Ω–æ–≤–∞

```bash
docker-compose down
# –ü–æ–¥–æ–∂–¥–∏—Ç–µ 1-2 –º–∏–Ω—É—Ç—ã
docker-compose up -d
```

### –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –¥–ª—è –≤—ã—è–≤–ª–µ–Ω–∏—è –æ—à–∏–±–æ–∫:
   ```bash
   docker-compose logs --tail=50 gemini-bot
   ```

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤:
   ```bash
   docker stats gemini-bot
   ```

3. –£–≤–µ–ª–∏—á—å—Ç–µ –ª–∏–º–∏—Ç—ã –ø–∞–º—è—Ç–∏ –≤ `docker-compose.yml` –µ—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ

### –ü—Ä–æ–±–ª–µ–º—ã —Å —Å–µ—Ç—å—é

–ï—Å–ª–∏ –±–æ—Ç –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ Telegram –∏–ª–∏ Gemini API:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ—Ç–µ–≤–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:
   ```bash
   docker-compose exec gemini-bot ping -c 3 8.8.8.8
   ```

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ DNS:
   ```bash
   docker-compose exec gemini-bot nslookup api.telegram.org
   ```

3. –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ø—Ä–æ–∫—Å–∏, –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –µ–≥–æ –≤ `docker-compose.yml`:
   ```yaml
   environment:
     - HTTP_PROXY=http://proxy.example.com:8080
     - HTTPS_PROXY=http://proxy.example.com:8080
   ```

## üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤

–ü–æ—Å—Ç–æ—è–Ω–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:
```bash
docker stats gemini-bot
```

–ò–ª–∏ —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç:
```bash
watch -n 1 'docker stats gemini-bot --no-stream'
```

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

1. **–û—á–∏—Å—Ç–∫–∞ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –æ–±—Ä–∞–∑–æ–≤:**
   ```bash
   docker image prune -a
   ```

2. **–û—á–∏—Å—Ç–∫–∞ volumes:**
   ```bash
   docker volume prune
   ```

3. **–ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å–∏—Å—Ç–µ–º—ã:**
   ```bash
   docker system prune -a --volumes
   ```

## üîÑ –ë—ç–∫–∞–ø –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ

### –°–æ–∑–¥–∞–Ω–∏–µ –±—ç–∫–∞–ø–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```bash
# –°–æ–∑–¥–∞—Ç—å –±—ç–∫–∞–ø .env —Ñ–∞–π–ª–∞
cp .env .env.backup.$(date +%Y%m%d)

# –°–æ–∑–¥–∞—Ç—å –∞—Ä—Ö–∏–≤ –ø—Ä–æ–µ–∫—Ç–∞
tar -czf gemini-bot-backup-$(date +%Y%m%d).tar.gz \
  .env \
  docker-compose.yml \
  Dockerfile \
  index.js \
  package.json \
  package-lock.json
```

### –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –±—ç–∫–∞–ø–∞

```bash
# –†–∞—Å–ø–∞–∫–æ–≤–∞—Ç—å –∞—Ä—Ö–∏–≤
tar -xzf gemini-bot-backup-YYYYMMDD.tar.gz

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å .env
cp .env.backup.YYYYMMDD .env

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞
./deploy.sh restart
```

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

### –ù–∞ VPS/Dedicated —Å–µ—Ä–≤–µ—Ä–µ

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Docker –∏ Docker Compose
2. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
   ```bash
   git clone <your-repo-url>
   cd gemini-bot
   ```
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ `.env` —Ñ–∞–π–ª
4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ:
   ```bash
   ./deploy.sh start
   ```

### –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ —Å–µ—Ä–≤–µ—Ä–∞

Docker Compose —Å `restart: unless-stopped` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å–∏—Å—Ç–µ–º—ã.

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Docker –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫:
```bash
sudo systemctl enable docker
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ systemd service (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–°–æ–∑–¥–∞–π—Ç–µ systemd service –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è:

```bash
sudo nano /etc/systemd/system/gemini-bot.service
```

–°–æ–¥–µ—Ä–∂–∏–º–æ–µ:
```ini
[Unit]
Description=Gemini Telegram Bot
Requires=docker.service
After=docker.service

[Service]
Type=oneshot
RemainAfterExit=yes
WorkingDirectory=/path/to/gemini-bot
ExecStart=/usr/local/bin/docker-compose up -d
ExecStop=/usr/local/bin/docker-compose down
TimeoutStartSec=0

[Install]
WantedBy=multi-user.target
```

–ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ service:
```bash
sudo systemctl daemon-reload
sudo systemctl enable gemini-bot
sudo systemctl start gemini-bot
```

## üìù –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –ü—Ä–æ—Å–º–æ—Ç—Ä –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ

```bash
docker inspect gemini-bot
```

### –≠–∫—Å–ø–æ—Ä—Ç –∏ –∏–º–ø–æ—Ä—Ç –æ–±—Ä–∞–∑–∞

–≠–∫—Å–ø–æ—Ä—Ç:
```bash
docker save -o gemini-bot-image.tar gemini-bot_gemini-bot
```

–ò–º–ø–æ—Ä—Ç:
```bash
docker load -i gemini-bot-image.tar
```

### –°–æ–∑–¥–∞–Ω–∏–µ —Å–Ω–∞–ø—à–æ—Ç–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

```bash
docker commit gemini-bot gemini-bot-snapshot:$(date +%Y%m%d)
```

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [Docker Documentation](https://docs.docker.com/)
- [Docker Compose Documentation](https://docs.docker.com/compose/)
- [Docker Best Practices](https://docs.docker.com/develop/dev-best-practices/)
- [Dockerfile Reference](https://docs.docker.com/engine/reference/builder/)

## üí° –°–æ–≤–µ—Ç—ã

1. **–†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥–∏** –¥–ª—è –≤—ã—è–≤–ª–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º
2. **–û–±–Ω–æ–≤–ª—è–π—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏** —Ä–µ–≥—É–ª—è—Ä–Ω–æ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
3. **–î–µ–ª–∞–π—Ç–µ –±—ç–∫–∞–ø—ã** –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ –¥–∞–Ω–Ω—ã—Ö
4. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤** –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
5. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `.env` —Ñ–∞–π–ª** –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–µ–∫—Ä–µ—Ç–æ–≤, –Ω–µ –¥–æ–±–∞–≤–ª—è–π—Ç–µ –∏—Ö –≤ –∫–æ–¥

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `./deploy.sh logs`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å: `./deploy.sh status`
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞: `./deploy.sh restart`
4. –ò–∑—É—á–∏—Ç–µ —Ä–∞–∑–¥–µ–ª "–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º" –≤—ã—à–µ
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Issues –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞

---

**–£–¥–∞—á–∏ –≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –±–æ—Ç–∞! üöÄ**
